"use strict";(self["webpackChunkvue_tea"]=self["webpackChunkvue_tea"]||[]).push([[709],{5142:function(s,t,e){e.r(t),e.d(t,{default:function(){return v}});var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"order container"},[e("header",[e("i",{staticClass:"iconfont icon-fanhui",on:{click:function(t){return s.$router.back()}}}),e("span",[s._v("提交订单")]),e("i",{staticClass:"iconfont icon-kefu"})]),e("section",[e("div",{staticClass:"path"},[e("h3",{staticClass:"path-title"},[s._v("收货信息")]),e("div",{staticClass:"path-content",on:{click:s.goAddress}},[e("div",[e("span",[s._v(s._s(s.address.name))]),e("span",[s._v(s._s(s.address.tel))])]),e("div",[e("span",[s._v(s._s(s.address.province))]),e("span",[s._v(s._s(s.address.city))]),e("span",[s._v(s._s(s.address.county))]),e("span",[s._v(s._s(s.address.addressDetail))])])])]),e("div",{staticClass:"payment"},[e("div",{staticClass:"payment-title"},[s._v("支付方式：")]),e("van-radio-group",{model:{value:s.radioPayment,callback:function(t){s.radioPayment=t},expression:"radioPayment"}},[e("van-radio",{attrs:{name:"wx"}},[s._v("微信支付")]),e("van-radio",{attrs:{name:"ali"}},[s._v("支付宝支付")])],1)],1),e("div",{staticClass:"goods"},[e("ul",s._l(s.goodsList,(function(t,a){return e("li",{key:a},[e("div",[e("img",{attrs:{src:t.imgUrl,alt:""}})]),e("div",{staticClass:"goods-content"},[e("h4",[s._v(s._s(t.goods_name))]),e("div",{staticClass:"goods-total"},[e("span",[s._v("¥"+s._s(t.goods_price))]),e("span",[s._v("x"+s._s(t.goods_num))])])])])})),0)])]),e("footer",[e("div",{staticClass:"order-total"},[e("span",[s._v("共")]),e("b",[s._v(s._s(s.total.num))]),e("span",[s._v("件,")]),e("span",[s._v("总金额：")]),e("em",[s._v("¥"+s._s(s.total.price))])]),e("div",{staticClass:"order-topay",on:{click:s.gopayment}},[s._v(" 提交订单 ")])])])},d=[],i=(e(4114),e(3890)),o=e(3518),r=e(1981),n=e(2537),l=e(9122),c=e.n(l),h={data(){return{radioPayment:"wx",address:{},item:[],total:{price:"",num:""},goodsList:[]}},computed:{...(0,o.aH)({addresslist:s=>s.address.addressList,order_id:s=>s.order.order_id,selectlist:s=>s.cart.selectlist}),...(0,o.L8)(["defaultAddress"])},created(){this.item=JSON.parse(this.$route.query.detail),this.goodsList=JSON.parse(this.$route.query.goodslist),this.getAddress(),this.getOrder()},activated(){this.item=JSON.parse(this.$route.query.detail),this.goodsList=JSON.parse(this.$route.query.goodslist),n.A.$on("selectAddress",function(s){this.address=JSON.parse(s),console.log(this.address,"xxxx")}.bind(this)),this.getOrder()},methods:{...(0,o.PY)(["INIT_ADDRESS"]),getAddress(){i.A.$axios({url:"/api/getAddress",method:"POST",headers:{token:!0}}).then((s=>{console.log(s.data.data),this.INIT_ADDRESS(s.data.data),this.defaultAddress.length>0?this.address=this.defaultAddress[0]:this.address=this.addresslist[0]}))},getOrder(){i.A.$axios({url:"/api/selectOrder",method:"POST",data:{order_id:this.order_id},headers:{token:!0}}).then((s=>{console.log(s.data.data),this.total.price=s.data.data[0].goods_price,this.total.num=s.data.data[0].goods_num}))},goAddress(){this.$router.push({path:"/address",query:{type:"select"}})},gopayment(){this.address?i.A.$axios({url:"/api/submitOrder",method:"POST",data:{order_id:this.order_id,selectlist:this.selectlist},headers:{token:!0}}).then((s=>{let t=[];this.goodsList.forEach((s=>{t.push(s.goods_name)}));let e={order_id:this.order_id,price:this.total.price,name:t.join("")};s.data.success&&i.A.$axios({url:"/api/payment",method:"POST",data:c().stringify(e),headers:{token:!0,"Content-Type":"application/x-www-form-urlencoded"}}).then((s=>{console.log(s),s.data.success&&(window.location.href=s.data.paymentUrl)})),console.log(s)})):(0,r.A)("请选择地址")}}},u=h,p=e(1656),_=(0,p.A)(u,a,d,!1,null,"e9678ca0",null),v=_.exports},2537:function(s,t,e){var a=e(6848);t.A=new a["default"]}}]);