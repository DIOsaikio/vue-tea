"use strict";(self["webpackChunkvue_tea"]=self["webpackChunkvue_tea"]||[]).push([[879],{2245:function(e,t,r){r.d(t,{A:function(){return l}});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("div",{staticClass:"left",on:{click:e.goBack}},[r("i",{staticClass:"iconfont icon-fanhui"})]),r("div",{staticClass:"middle"},[r("form",{attrs:{action:"",onsubmit:"return false"}},[r("i",{staticClass:"iconfont icon-sousuo"}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchVal,expression:"searchVal"}],ref:"myinput",attrs:{type:"text",placeholder:"搜索您喜欢的商品...",autofocus:""},domProps:{value:e.searchVal},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.goSearch.apply(null,arguments)},input:function(t){t.target.composing||(e.searchVal=t.target.value)}}})])]),r("div",{staticClass:"right",on:{click:e.goSearch}},[e._v("搜索")])])},s=[],c=(r(4114),{data(){return{searchVal:this.$route.query.keyword||"",searchArr:[]}},created(){},mounted(){window.addEventListener("touchmove",this.myTouchMove,!0)},methods:{myTouchMove(){this.$refs.myinput.blur()},goBack(){this.$router.back()},goSearch(){if(!this.searchVal)return;localStorage.getItem("searchList")?this.searchArr=JSON.parse(localStorage.getItem("searchList")):localStorage.setItem("searchList","[]"),this.searchArr.unshift(this.searchVal);let e=new Set(this.searchArr);localStorage.setItem("searchList",JSON.stringify(Array.from(e))),this.searchVal!==this.$route.query.keyword&&this.$router.push({name:"list",query:{keyword:this.searchVal}})}}}),i=c,o=r(1656),n=(0,o.A)(i,a,s,!1,null,"9bdefd1c",null),l=n.exports},879:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-index"},[r("Header"),r("section",[0!=e.searchArr.length?r("div",{staticClass:"search-history"},[r("h2",[e._m(0),r("div",{staticClass:"clear",on:{click:e.clearStorage}},[r("span",[e._v("清空搜索记录")])])]),r("ul",e._l(e.searchArr,(function(t,a){return r("li",{key:a,on:{click:function(r){return e.goSearch(t)}}},[e._v(" "+e._s(t)+" ")])})),0),r("hr")]):r("div",[e._v("暂无数据")])]),r("Tabbar")],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"history"},[r("i",{staticClass:"iconfont icon-shijian"}),r("span",[e._v("历史搜索")])])}],c=(r(4114),r(9930)),i=r(2245),o=r(6483),n={data(){return{searchArr:[]}},created(){this.searchArr=JSON.parse(localStorage.getItem("searchList"))||[]},methods:{clearStorage(){console.log(111),(0,o.MessageBox)({title:"提示",message:"确定执行此操作?",showCancelButton:!0}).then((e=>{"confirm"==e&&(localStorage.removeItem("searchList"),this.searchArr=[])}))},goSearch(e){this.$router.push({name:"list",query:{keyword:e}})}},components:{Tabbar:c.A,Header:i.A}},l=n,h=r(1656),u=(0,h.A)(l,a,s,!1,null,"40cb4d93",null),d=u.exports}}]);